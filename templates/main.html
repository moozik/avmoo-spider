<html lang="cn"><head>
<meta charset="utf-8">
<meta name="trafficjunky-site-verification" content="445w343y8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="x-dns-prefetch-control" content="on">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{% block title %} {% endblock %} -avmoo-spider</title>
<meta name="author" content="AVMOO">
<meta name="keywords" content="">
<meta name="description" content="AVMOO - 你的线上日本成人影片情报站。管理你的影片并分享你的想法。">
<link rel="shortcut Icon" href="{{url_for('static', filename='face.ico')}}">
<link rel="bookmark" href="{{url_for('static', filename='face.ico')}}">
<link rel="dns-prefetch" href="https://jp.netcdn.space">
<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='app.min.css')}}">
<style>
.sub_title{
    border: 1px solid #f98cfc;
    background-color: #f44336;
    color: white;
    font-size: 8px;
    padding: 3px;
    border-radius: 6px;
}
.tag-style{
    display: inline-block;
    color: #000;
    background-color: #d8d8d8;
    border: 2px solid #d8d8d8;
    padding: 2px;
    margin: 2px;
    border-radius: 7px;
}
</style>
{% block head %} {% endblock %}
</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top top-bar">
      <div class="container" style="width: 1500px;">
        <div id="navbar" class="collapse navbar-collapse">
          <form class="navbar-form navbar-left fullsearch-form" action="/search" onsubmit="return false">
            <div class="input-group">
              <input name="keyword" type="text" class="form-control" placeholder="演员ID,类型,演员" value="{% block keyword %}{% endblock %}">
              <span class="input-group-btn">
                <button class="btn btn-default" type="submit">查找</button>
              </span>
            </div>
          </form>
          <ul class="nav navbar-nav">
            <li><a>{% if page and page.count %}总数:(<b style="color:red;">{{page.count}}</b>){% endif %}</a></li>
            <li><a href="/">全部</a></li>
            <li><a href="/search/已发布" title="Released">已发布</a></li>
            <li><a href="/search/已下载" title="Already downloaded">已下载</a></li>
            <li><a href="/search/有资源" title="Resources">有资源</a></li>
            <li><a href="/actresses" title="Actresses">女优</a></li>
            <li><a href="/search/收藏影片" title="Favorites">收藏</a></li>
            <li><a href="/genre" title="Genre">类别</a></li>
          </ul>

        <ul class="nav navbar-nav navbar-right">
            <li><a href="/spider" style="font-weight: bold;color:#f44336;" title="spider">爬虫</a></li>
            <li><a href="/action/scandisk" style="font-weight: bold;" title="scan local files">扫描文件</a></li>
            <li><a onclick="catchSwitch()">缓存开关</a></li>
            <li><a href="https://tellme.pw/avmoo" target="_blank">最新地址</a></li>
            <li><a class="glyphicon glyphicon-thumbs-up" href="https://github.com/moozik/avmoo-spider" target="_blank">本程序</a></li>
        </ul>
        </div>
      </div>
    </nav>
<div class="row visible-xs-inline footer-bar">
    <div class="col-xs-3 text-center">
        <a id="menu" class="btn btn-default trigger-overlay"><i class="glyphicon glyphicon-align-justify"></i></a>
    </div>
        <div class="col-xs-3 text-center">
            </div>
    <div class="col-xs-3 text-center">
                <a id="prev" class="btn btn-default" href="/page/2"><i class="glyphicon glyphicon-chevron-right"></i></a>
            </div>
        <div class="col-xs-3 text-center">
        <a id="back" class="btn btn-default" href="javascript:window.history.back()"><i class="glyphicon glyphicon-share-alt flipx"></i></a>
    </div>
</div>
{% block container %}
{% endblock %}

{% block pagination %}
    {% if page %}
	<div class="text-center hidden-xs mtb-20">
		<ul class="pagination pagination-lg mtb-0">
            {% if page.left>0 %}
            <li>
                <a name="prepage" href="{{page.pageroot}}/page/{{page.left}}">
                    <span class="glyphicon glyphicon-chevron-left"></span> 上一页</a>
            </li>
            {% endif %}
            {% for item in page.list %}
                {% if page.now == item %}
                    <li class="active">
                        <a name="numbar" href="{{page.pageroot}}/page/{{item}}">{{item}}</a>
                    </li>
                {% else %}
                    <li>
                        <a name="numbar" href="{{page.pageroot}}/page/{{item}}">{{item}}</a>
                    </li>
                {% endif %}
            {% endfor %}

            {% if page.right>0 %}
                <li>
                <a name="nextpage" href="{{page.pageroot}}/page/{{page.right}}">
                    <span class="glyphicon glyphicon-chevron-right"></span> 下一页</a>
                </li>
            {% endif %}
		</ul>
  </div>
  {% endif %}
{% endblock %}

{% block other %}{% endblock %}

<footer class="footer hidden-xs">
	<div class="container-fluid">
	</div>
</footer>

<div class="modal fade" id="message" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="message_title">
                    删除成功
                </h4>
            </div>
            <div class="modal-body">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="confirm">
                    确认
                </button>
            </div>
        </div>
    </div>
</div>
<script src="{{url_for('static', filename='app.min.js')}}"></script>
<script>
    function showMessage(title, body){
        $("#message").find('.modal-title').html(title)
        $("#message").find(".modal-body").html(body);
        $('#message').modal('show');
    }
    function catchSwitch(){
        $.get('/action/catch/switch',function(data){
            showMessage(data,"");
        });
    }
    $('#confirm').click(function(){
        $('#message').modal('hide');
    });
    function explorerLocal(path){
        $.get("/action/explorer",{"path":path});
    }
    function crawlLink(input_text){
        $.post("/action/crawl", {
            input_text: input_text
        }, function (data) {
            showMessage(data,"");
        });
    }
    function crawlStar(input_text){
        $.post("/action/crawl/star", {
            input_text: input_text
        }, function (data) {
            showMessage(data,"");
        });
    }
    function crawlAccurate(page_type, keyword){
        $.post("/action/crawl/accurate", {
            page_type: page_type,
            keyword: keyword,
        }, function (data) {
            showMessage(data,"");
        });
    }
    function analyseStar(linkid){
        $.get("/action/analyse/star/" + linkid, function (data) {
            var starName = data.starName;
            var html = "<p style='font-weight: 700;margin-top:10px;'>总时长</p>";
            html += "<p>" + data.minuteSum + " min</p>";

            html += "<p style='font-weight: 700;margin-top:10px;'>分类</p>";
            data.genreCounter.forEach(item => {
                html += Link(item.name + span('('+item.count+')', 'red'), '/search/' + starName + '%20' + item.name) + ' ';
            })

            html += "<p style='font-weight: 700;margin-top:10px;'>合作演员</p>";
            data.starsCounter.forEach(item => {
                html += Link(item.name + span('('+item.count+')', 'red'), '/search/' + starName + '%20' + item.name) + ' ';
            })
            showMessage("分析结果", html);
        });
    }
    function Link(name, link){
        return '<a class="tag-style" href="'+link+'" target="_blank">'+name+'</a>'
    }
    function span(name, color){
        return '<span style="color:'+color+'">'+name+'</span>'
    }
    function insertMovieExtend(extend_name, key, val){
        $.get("/action/extend/insert", {
            "extend_name": extend_name,
            "key": key,
            "val": val,
        },function(data){
            showMessage(data,"");
        });
    }
    function deleteMovieExtend(extend_name, key, val){
        $.get("/action/extend/delete", {
            "extend_name": extend_name,
            "key": key,
            "val": val,
        },function(data){
            showMessage(data,"");
        });
    }
</script>
{% block javascript %} {% endblock %}
</body>
</html>