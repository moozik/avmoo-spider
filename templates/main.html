<html lang="cn"><head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="x-dns-prefetch-control" content="on">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{% block title %} {% endblock %}  avmoo-spider</title>
<link rel="shortcut Icon" href="/static/icon.png">
<link rel="bookmark" href="/static/icon.png">
<link rel="dns-prefetch" href="http://jp.netcdn.space">
<link rel="dns-prefetch" href="http://pics.dmm.com">
<link rel="dns-prefetch" href="http://pics.dmm.co.jp">
<link rel="stylesheet" type="text/css" href="/static/app.min.css">
<style>
.sub_title{
    border: 1px solid #f98cfc;
    background-color: #f44336;
    color: white;
    font-size: 8px;
    padding: 3px;
    border-radius: 6px;
}
.movie-desc {
    position: absolute;
    width: 167px;
    height: auto;
    min-height: 220px;
    left: 10px;
    top: 100px;
    padding: 5px;
    color: white;
    background-color: #000;
    opacity: 0;
    line-height: 19px;
    transition: all .2s;
}
.movie-box:hover .movie-desc {
	opacity: 0.8;
	top: 10px;
}
.info a {
    color: #0015af;
}
</style>
{% block head %} {% endblock %}
</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top top-bar">
      <div class="container" style="width: 1500px;">
        <a href="https://github.com/moozik/avmoo-spider" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
        <div id="navbar" class="collapse navbar-collapse">
          <form class="navbar-form navbar-left fullsearch-form" action="/search" onsubmit="return false">
            <div class="input-group">
              <input name="keyword" type="text" class="form-control" placeholder="演员ID,类型,演员" value="{% block placeholder %}{% endblock %}">
              <span class="input-group-btn">
                <button class="btn btn-default" type="submit">查找</button>
              </span>
            </div>
          </form>
          <ul class="nav navbar-nav">
            <li><a>{% if page %}总数:(<b style="color:red;">{{page.count}}</b>){% endif %}</a></li>
            <li><a href="/">全部</a></li>
            <li><a href="/search/已发布" title="Released">已发布</a></li>
            <li><a href="/search/已下载" title="Already downloaded">已下载</a></li>
            <li><a href="/search/有资源" title="Resources">有资源</a></li>
            <li><a href="/actresses" title="Actresses">女优</a></li>
            <li><a href="/search/收藏影片" title="Favorites">收藏</a></li>
            <li><a href="/genre" title="Genre">类别</a></li>
            <li><a href="/group" title="group">番号</a></li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
              <li><a href="/spider" style="font-weight: bold;color:#f44336;" title="spider"><span class="glyphicon glyphicon-tasks" style="font-size:12px;"></span> 爬虫</a></li>
              <li><a href="/scandisk" title="scan local files"><span class="glyphicon glyphicon-search" style="font-size:12px;"></span> 扫描</a></li>
              <li><a href="/config" title="config"><span class="glyphicon glyphicon-wrench" style="font-size:12px;"></span> 配置</a></li>
                {% if origin_link %}
                <li><a href="{{ origin_link }}" target="_blank" title="origin link"><span class="glyphicon glyphicon-link" style="font-size:12px;"></span> 链接</a></li>
                {% else %}
                <li><a href="{{config['base']['avmoo_site']}}" target="_blank" title="origin link"><span class="glyphicon glyphicon-link" style="font-size:12px;"></span> 链接</a></li>
                {% endif %}
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="glyphicon glyphicon-globe" style="font-size:12px;"></span> <span class="hidden-sm">{{config['base']['country_name']}}</span> <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li><a onclick="changeLanguage('cn')">简体中文</a></li>
                  <li><a onclick="changeLanguage('en')">English</a></li>
                  <li><a onclick="changeLanguage('ja')">日本语</a></li>
                  <li><a onclick="changeLanguage('tw')">正體中文</a></li>
                </ul>
              </li>
          </ul>
        </div>
      </div>
    </nav>
<div class="row visible-xs-inline footer-bar">
    <div class="col-xs-3 text-center">
        <a id="menu" class="btn btn-default trigger-overlay"><i class="glyphicon glyphicon-align-justify"></i></a>
    </div>
        <div class="col-xs-3 text-center">
            </div>
    <div class="col-xs-3 text-center">
                <a id="prev" class="btn btn-default" href="/page/2"><i class="glyphicon glyphicon-chevron-right"></i></a>
            </div>
        <div class="col-xs-3 text-center">
        <a id="back" class="btn btn-default" href="javascript:window.history.back()"><i class="glyphicon glyphicon-share-alt flipx"></i></a>
    </div>
</div>
{% block container %}
{% endblock %}

{% block pagination %}
    {% if page %}
	<div class="text-center hidden-xs mtb-20">
		<ul class="pagination pagination-lg mtb-0">
            {% if page.head > 0 %}
            <li>
                <a href="{{page.pageroot}}/page/1">
                    <span class="glyphicon glyphicon-fast-backward"></span> 首页</a>
            </li>
            {% endif %}
            {% if page.left>0 %}
            <li>
                <a href="{{page.pageroot}}/page/{{page.left}}">
                    <span class="glyphicon glyphicon-chevron-left"></span> 上一页</a>
            </li>
            {% endif %}
            {% for item in page.list %}
                {% if page.now == item %}
                    <li class="active">
                        <a href="{{page.pageroot}}/page/{{item}}">{{item}}</a>
                    </li>
                {% else %}
                    <li>
                        <a href="{{page.pageroot}}/page/{{item}}">{{item}}</a>
                    </li>
                {% endif %}
            {% endfor %}

            {% if page.right>0 %}
                <li>
                <a href="{{page.pageroot}}/page/{{page.right}}">
                    <span class="glyphicon glyphicon-chevron-right"></span> 下一页</a>
                </li>
            {% endif %}
            {% if page.tail > 0 %}
            <li>
                <a href="{{page.pageroot}}/page/{{page.tail}}">
                    <span class="glyphicon glyphicon-fast-forward"></span> 尾页</a>
            </li>
            {% endif %}
		</ul>
  </div>
  {% endif %}
{% endblock %}

{% block other %}{% endblock %}

<div class="modal fade" id="message" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="message_title">
                    删除成功
                </h4>
            </div>
            <div class="modal-body">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="confirm">
                    确认
                </button>
            </div>
        </div>
    </div>
</div>
<script src="/static/app.min.js"></script>
<script>
    function showMessage(title, body){
        $("#message").find('.modal-title').html(title)
        $("#message").find(".modal-body").html(body);
        $('#message').modal('show');
    }
    function catchSwitch(){
        $.get('/action/catch/switch',function(data){
            showMessage(data,"");
        });
    }
    $('#confirm').click(function(){
        $('#message').modal('hide');
    });
    function explorerLocal(path){
        $.get("/action/explorer",{"path":path});
    }
    function crawlLink(input_text){
        $.post("/action/crawl", {
            input_text: input_text
        }, function (data) {
            showMessage(data,"");
        });
    }
    function crawlAccurate(page_type, keyword){
        $.post("/action/crawl/accurate", {
            page_type: page_type,
            keyword: keyword,
        }, function (data) {
            showMessage(data,"");
        });
    }
    function analyse(page_type, linkid){
        $.get("/action/analyse/" + page_type + "/" + linkid, function (data) {
            let starName = data.starName;
            let html = "<p style='font-weight: 700;margin-top:10px;'>总时长</p>";
            html += '<span class="tag-style">' + data.minuteSum + ' min</span>';

            html += "<p style='font-weight: 700;margin-top:10px;'>分类</p>";
            data.genreCounter.forEach(item => {
                html += Link(item.name + span('('+item.count+')', 'red'), '/search/' + page_type + '=' + linkid + '%20genre=' + item.name) + ' ';
            })

            html += "<p style='font-weight: 700;margin-top:10px;'>演员</p>";
            data.starsCounter.forEach(item => {
                html += Link(item.name + span('('+item.count+')', 'red'), '/search/' + page_type + '=' + linkid + '%20star=' + item.name) + ' ';
            })

            html += "<p style='font-weight: 700;margin-top:10px;'>系列</p>";
            data.seriesCounter.forEach(item => {
                html += Link(item.name + span('('+item.count+')', 'red'), '/search/' + page_type + '=' + linkid + '%20series=' + item.name) + ' ';
            })
            showMessage("分析结果", html);
        });
    }
    function Link(name, link){
        return '<a class="tag-style" href="'+link+'" target="_blank">'+name+'</a>'
    }
    function span(name, color){
        return '<span style="color:'+color+'">'+name+'</span>'
    }
    function insertMovieExtend(extend_name, key, val){
        $.get("/action/extend/insert", {
            "extend_name": extend_name,
            "key": key,
            "val": val,
        },function(data){
            showMessage(data,"");
        });
    }
    function deleteMovieExtend(extend_name, key, val){
        $.get("/action/extend/delete", {
            "extend_name": extend_name,
            "key": key,
            "val": val,
        },function(data){
            showMessage(data,"");
        });
    }
    function changeLanguage(country){
        $.get("/action/change/language", {
            "country": country,
        },function(data){
            location.reload();
        });
    }
</script>
{% block javascript %} {% endblock %}
</body>
</html>